ssh -i ~/Downloads/LightsailDefaultKey-ap-northeast-1.pem ubuntu@54.250.78.19

１,lightsailでインスタンス作成
・ubuntu22.04

2,Lightsail に SSH 接続する
・VSCodeで [Remote - SSH 拡張機能] をインストール
・ターミナルでchmod 600 ~/Downloads/LightsailDefaultKey-ap-northeast-1.pem実行
・VSCodeのSSH設定ファイルを開く
記述
Host lightsail-laravel
    HostName 54.250.78.19  # ← 自分のパブリックIP
    User ubuntu
    IdentityFile ~/Downloads/LightsailDefaultKey-ap-northeast-1.pem

・ssh -i ~/Downloads/LightsailDefaultKey-ap-northeast-1.pem ubuntu@54.250.78.19をプロジェクトのターミナルに入力→yesボタンクリック

3,新しく開いたvscodeで設定
パッケージ情報を更新＆必要なアップデートを自動実行（-y で確認省略）、必要なツール（Docker / Git / unzip など）を一括でインストール、ubuntu ユーザーを Docker グループに追加（sudo なしで docker を使えるように）
・ubuntu@ip-172-26-1-173:~$ sudo apt update && sudo apt upgrade -y
　sudo apt install -y docker.io docker-compose git unzip
　sudo usermod -aG docker ubuntu　をまとめて実行

ubuntu@ip-172-26-1-173:~$ git clone https://github.com/junjimoriyama/laravel-quiz-qpp.git
Cloning into 'laravel-quiz-qpp'...
Username for 'https://github.com': 
Password for 'https://junjimoriyama@github.com': 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
・GitHub からのクローン
cd laravel-quiz-qppでubuntu@ip-172-26-1-173:~/laravel-quiz-qpp$ なるのを確認

cp .env.example .env
↓
nano .env

一番下にカーソルがある状態で…

Ctrl + O を押す（Oはオーです）
　→ File Name to Write: .env と表示される

そのまま Enter を押す（上書き保存）

次に Ctrl + X で Nano を終了します


・docker run --rm \
  -v $(pwd):/app \
  -w /app \
  composer install
を実行

↓ エラーになる

sudo apt update && sudo apt upgrade -y\
↓
sudo apt install -y docker.io docker-compose git unzip
↓
新しいカーネルが利用可能なので再起動すると反映されますよ」というお知らせ enter
↓
アップグレードによってライブラリが更新されたため、影響を受けるサービス（デーモン）を再起動しますか？」という確認画面 enter
↓
sudo usermod -aG docker ubuntu
↓
exit
↓
ssh -i ~/Downloads/LightsailDefaultKey-ap-northeast-1.pem ubuntu@54.250.78.19
↓
cd laravel-quiz-qpp
↓
# composer install（初回のみ）
docker run --rm \
  -v $(pwd):/app \
  -w /app \
  composer install --ignore-platform-req=ext-bcmath

↓  
./vendor/bin/sail up -d
↓
容量不足でエラー

sudo fallocate -l 1G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile　※一つずつ実行

↓↓↓

ubuntu@ip-172-26-1-173:~/laravel-quiz-qpp$ ./vendor/bin/sail up -d
laravel-quiz-qpp_laravel.test_1   start-container   Exit 0        
Shutting down old Sail processes...
Creating network "laravel-quiz-qpp_sail" with driver "bridge"
Creating laravel-quiz-qpp_mysql_1 ... done
Creating laravel-quiz-qpp_laravel.test_1 ... done

・無事にIpアドレスで接続できる

・ ./vendor/bin/sail artisan key:generate

・LaravelがMySQLに接続できない

DB_USERNAME=laravel  # これが正しい場合、そのまま
DB_PASSWORD=secret    # 正しいパスワードに変更

cd laravel-quiz-qpp



sessions テーブルのマイグレーションを実行
./vendor/bin/sail artisan migrate

・ログイン情報ない　シーダーをマイグレーション

・レベルのデータがない
開発用データベースと本番用データベースは別であり引き継げない


cd ~/laravel-quiz-qpp
